<div th:fragment="content" class="ad-form-page">
  <!-- Fragmento: página de criação de anúncio. -->
  <div class="card ad-form-card">
    <h2>Novo Anúncio</h2>

    <!-- Alerta de erro (se existir) -->
    <div th:if="${error}" class="alert error" th:text="${error}"></div>

    <!-- Formulário ligado a `ad` via `th:object`. -->
    <form method="post" th:action="@{/ads}" th:object="${ad}">
      <!-- Token CSRF (Spring Security) -->
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

      <div class="form-row">
        <!-- Campos base: 'type' e 'accommodationType' usam enums do domínio via Thymeleaf (T(...)). -->
        <div class="form-col">
          <label for="type">Tipo</label>
          <select id="type" th:field="*{type}">
            <option th:value="${T(roomrent.model.Ad.AdType).OFERTA}">Oferta</option>
            <option th:value="${T(roomrent.model.Ad.AdType).PROCURA}">Procura</option>
          </select>
        </div>
        <div class="form-col">
          <label for="accommodationType">Alojamento</label>
          <select id="accommodationType" th:field="*{accommodationType}">
            <option th:value="${T(roomrent.model.Ad.AccommodationType).QUARTO}">Quarto</option>
            <option th:value="${T(roomrent.model.Ad.AccommodationType).T0}">T0</option>
            <option th:value="${T(roomrent.model.Ad.AccommodationType).T1}">T1</option>
            <option th:value="${T(roomrent.model.Ad.AccommodationType).T2}">T2</option>
            <option th:value="${T(roomrent.model.Ad.AccommodationType).T3}">T3</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-col">
          <label for="genderPreference">Género</label>
          <select id="genderPreference" th:field="*{genderPreference}">
            <option th:value="${T(roomrent.model.Ad.GenderPreference).INDIFERENTE}">Indiferente</option>
            <option th:value="${T(roomrent.model.Ad.GenderPreference).MASCULINO}">Masculino</option>
            <option th:value="${T(roomrent.model.Ad.GenderPreference).FEMININO}">Feminino</option>
          </select>
        </div>
        <div class="form-col">
          <label for="price">Preço (€/mês)</label>
          <!-- Input de preço: validação mínima no cliente (step/min). -->
          <input id="price" th:field="*{price}" type="number" step="0.01" min="0.01" required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-col">
          <label for="zone">Zona</label>
          <input id="zone" th:field="*{zone}" type="text" required maxlength="120">
        </div>
        <div class="form-col">
          <label for="contact">Contacto</label>
          <!-- Contacto: pode ser telefone ou email. -->
          <input id="contact" th:field="*{contact}" type="text" required maxlength="120">
        </div>
      </div>

      <label for="details">Detalhes</label>
      <!-- Detalhes: validação de comprimento no cliente. -->
      <textarea id="details" th:field="*{details}" required minlength="5" maxlength="2000"></textarea>

      <!-- advertiserName vem do utilizador autenticado. -->
      <input type="hidden" th:field="*{advertiserName}" th:value="${#authentication.name}" />

      <!-- Botão de submissão -->
      <button type="submit" class="btn-primary">Registar anúncio</button>
    </form>
  </div>
</div>
